<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
  <title>Arduino - SPIDigitalPot </title>
  <link rel="shortcut icon" type="image/x-icon" href="../favicon.png">
  <link rel='stylesheet' href='../pub/skins/arduinoWide_SSO/arduinoWide_SSO.css' 
type='text/css' />
  <link href="https://plus.google.com/114839908922424087554" rel="publisher" />
    <!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
span.anchor {
	float: left;
	font-size: 10px;
	margin-left: -10px;
	width: 10px;
    position:relative; top:-0.1em;
	text-align: center;
}
span.anchor a { text-decoration: none; }
span.anchor a:hover { text-decoration: underline; }
ol.toc { text-indent:-20px; list-style: none; }
ol.toc ol.toc { text-indent:-40px; }
div.tocfloat { font-size: smaller; margin-bottom: 10px;
    border-top: 1px dotted #555555; border-bottom: 1px dotted #555555;
    padding-top: 5px; padding-bottom: 5px; 
    width: 38%; float: right; margin-left: 10px; clear: right;
    margin-right:-13px; padding-right: 13px; padding-left: 13px;
    background-color: #eeeeee; }
div.toc { font-size: smaller; 
    padding: 5px; border: 1px dotted #cccccc;
    background: #f7f7f7;
    margin-bottom: 10px; }
div.toc p { background-color: #f9f6d6;
    margin-top:-5px;   padding-top: 5px;
    margin-left:-5px;  padding-left: 5px;
    margin-right:-5px; padding-right: 5px;
    padding-bottom: 3px;
    border-bottom:  1px dotted #cccccc; }.editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border: 2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  td.markup1 { border-bottom: 1px solid #ccf; }
  div.faq { margin-left:2em; }
  div.faq p.question { margin: 1em 0 0.75em -2em; font-weight:bold; }
  div.faq hr { margin-left: -2em; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.arduino  {font-family:monospace;}
.arduino .imp {font-weight: bold; color: red;}
.arduino .kw1 {color: #CC6600;}
.arduino .kw2 {color: #006699;}
.arduino .kw3 {color: #CC6600; font-weight: bold;}
.arduino .co1 {color: #7E7E7E; font-style: italic;}
.arduino .co2 {color: #7E7E7E;}
.arduino .coMULTI {color: #7E7E7E; font-style: italic;}
.arduino .es0 {color: #000099; font-weight: bold;}
.arduino .es1 {color: #000099; font-weight: bold;}
.arduino .es2 {color: #660099; font-weight: bold;}
.arduino .es3 {color: #660099; font-weight: bold;}
.arduino .es4 {color: #660099; font-weight: bold;}
.arduino .es5 {color: #006699; font-weight: bold;}
.arduino .br0 {color: #000000;}
.arduino .sy0 {color: #000000;}
.arduino .st0 {color: #0066CC;}
.arduino .nu0 {color: #000000;}
.arduino .nu6 {color: #208080;}
.arduino .nu8 {color: #208080;}
.arduino .nu12 {color: #208080;}
.arduino .nu16 {color:#800080;}
.arduino .nu17 {color:#800080;}
.arduino .nu18 {color:#800080;}
.arduino .nu19 {color:#800080;}
.arduino .me1 {color: #ff1493;}
.arduino .me2 {color: #ff1493;}
.arduino span.xtra { display:block; }

.sourceblocklink {
  text-align: right;
  font-size: smaller;
}
.sourceblocktext {
  padding: 0.5em;
  color: #000000;
  background-color: #ffffff;
}
.sourceblocktext div {
  font-family: monospace;
  font-size: small;
  line-height: 1;
  height: 1%;
}
.sourceblocktext div.head,
.sourceblocktext div.foot {
  font: italic medium serif;
  padding: 0.5em;
}

--></style><script type="text/javascript">
function toggle(obj) {
    var elstyle = document.getElementById(obj).style;
    var text    = document.getElementById(obj + "tog");
    if (elstyle.display == 'none') {
        elstyle.display = 'block';
        text.innerHTML = "hide";
    } else {
        elstyle.display = 'none';
        text.innerHTML = "show";
    }
}
</script>  <meta name='robots' content='index,follow' />

  <meta name="verify-v1" content="TtxFIEJAB6zdJ509wLxjnapQzKAMNm9u0Wj4ho6wxIY=" />
  <script src="https://id.arduino.cc/css/sso_bar_js_2.php?s=reference"></script>
  <link rel="stylesheet" type="text/css" media="screen" href="../../../id.arduino.cc/css/sso_bar.css" />
</head>
<body>

		<div id="ssotoolbar">
		  <div id="al">
			<nobr><div id="ssoNavBar">&nbsp;</div></nobr>
		  </div>
		  <div id="ar">
			<nobr>
			  <div id="loginInfo"><div id="loading">Loading...</div></div>
			</nobr>
		  </div>
		</div>
		<script>ssoGenerateNavigationBar('');</script>
<div id="page">
<!--PageHeaderFmt-->
<div id="pageheader">
  <div class="title"><a href='../../en.html'>Arduino</a></div>
  <div class="search">
    <!-- SiteSearch Google -->
    <FORM method=GET action="http://www.google.com/search">
    <input type=hidden name=ie value=UTF-8>
    <input type=hidden name=oe value=UTF-8>
    <INPUT TYPE=text name=q size=25 maxlength=255 value="">
    <INPUT type=submit name=btnG VALUE="search">
    <input type=hidden name=domains value="http://arduino.cc/">
    <input type=hidden name=sitesearch value="http://arduino.cc/">
    </FORM>
    <!-- SiteSearch Google -->
  </div>
</div>
<!--/PageHeaderFmt-->
<!--PageLeftFmt-->
<div id="pagenav">
  <div id="navbar">
  	<p><a class='wikilink' href='../Main/Buy.html'>Buy</a>
<a class='wikilink' href='../Main/Software.html'>Download</a>
<a class='wikilink' href='../Guide/HomePage.html'>Getting Started</a>
<a class='wikilink' href='HomePage.html'>Learning</a>
<a class='wikilink' href='../Reference/HomePage.html'>Reference</a>
<a class='wikilink' href='../Main/Hardware.html'>Hardware</a>
<a class='wikilink' href='../Main/FAQ.html'>FAQ</a>
</p>
<p class='vspace'></p>

  </div>
</div>
<!--/PageLeftFmt-->
<div id="pagetext">
<!--PageText-->
<div id='wikitext'>
<p><strong>Learning</strong> &nbsp;  <a class='wikilink' href='HomePage.html'>Examples</a> | <a class='wikilink' href='Foundations.html'>Foundations</a> | <a class='wikilink' href='../Hacking/HomePage.html'>Hacking</a> | <a class='wikilink' href='Links.html'>Links</a>
</p>
<p class='vspace'></p><h3>Controlling a Digital Potentiometer Using SPI</h3>
<p><em>Examples &gt; SPI <span class='wikiword'>LIbrary</span></em>
</p>
<p class='vspace'></p><p>In this tutorial you will learn how to control the <span class='wikiword'>AD5206</span> digital
potentiometer using Serial Peripheral Interface (SPI).  For an
explanation of SPI see the <a class='urllink' href='http://arduino.cc/en/Tutorial/SPIEEPROM' rel='nofollow'>SPI EEPROM tutorial</a>.
</p>
<p class='vspace'></p><p>Digital potentiometers are useful when you need to vary the resistance
in a circuit electronically rather than by hand. Example applications
include LED dimming, audio signal conditioning and tone generation. In
this example we will use a six channel digital potentiometer to
control the brightness of six <span class='wikiword'>LEDs</span>. The steps we will cover for
implementing SPI communication can be modified for use with most other
SPI devices.
</p>
<p class='vspace'></p><div  class='BOM' >
<h3>Hardware Required</h3>
<ul><li><span class='wikiword'>AD5206</span> Digital Potentiometer
</li><li>Arduino Microcontroller Module
</li><li>6 Light Emitting Diodes (<span class='wikiword'>LEDs</span>)
</li><li>6 220 ohm resistors
</li><li>Hookup Wire
</li></ul></div>
<p class='vspace'></p><h3>Introduction to the <span class='wikiword'>AD5206</span> Digital Potentiometer</h3>
<p><a class='urllink' href='http://datasheet.octopart.com/AD5206BRU10-Analog-Devices-datasheet-8405.pdf' rel='nofollow'>Click for for the AD5206's datasheet.</a>
</p><div><img src='../uploads/Tutorial/AD5206_pins.jpg' alt='' title='' /></div>
<div><img src='../uploads/Tutorial/AD5206_pinsDescript.jpg' alt='' title='' /></div>
<p>The <span class='wikiword'>AD5206</span> is a 6 channel digital potentiometer. This means it has six
variable resistors (potentiometers) built in for individual electronic
control. There are three pins on the chip for each of the six internal
variable resistors, and they can be interfaced with just as you would
use a mechanical potentiometer. The individual variable resistor pins
are labeled Ax, Bx and Wx, ie. A1, B1 and W1.
For example, in this tutorial we will be using each variable resistor
as a voltage divider by pulling one side pin (pin B) high, pulling
another side pin (pin A) low and taking the variable voltage output of
the center pin (Wiper).
In this case, the <span class='wikiword'>AD5206</span> provides a maximum resistance of 10K ohms,
delivered in 255 steps (255 being the max, 0 being the least).
</p>
<p class='vspace'></p><h3>Circuit</h3>
<div  class='circuit' >
<div><a class='urllink' href='../uploads/Tutorial/AD5206_arduino_bb.png' rel='nofollow'><img height='300px' src='../uploads/Tutorial/AD5206_arduino_bb.png' alt='' title='' /></a></div>
<p class='vspace'></p><p>image developed using <a class='urllink' href='http://www.fritzing.org/' rel='nofollow'>Fritzing</a>. For
more circuit examples, see the
<a class='urllink' href='http://fritzing.org/projects/' rel='nofollow'>Fritzing project page</a>
</p></div>
<p class='vspace'></p><h3>Schematic</h3>
<div  class='circuit' >
<div><a class='urllink' href='../uploads/Tutorial/AD5206_arduino_sch.png' rel='nofollow'><img height='300px' src='../uploads/Tutorial/AD5206_arduino_sch.png' alt='' title='' /></a></div>
</div>
<h3>Code</h3>
<div  class='code' >
<p class='vspace'></p><p>
<div class='sourceblock ' id='sourceblock1'>
  <div class='sourceblocktext'><div class="arduino"><span class="coMULTI">/*<br />
&nbsp; Digital Pot Control<br />
&nbsp; <br />
&nbsp; This example controls an Analog Devices AD5206 digital potentiometer.<br />
&nbsp; The AD5206 has 6 potentiometer channels. Each channel's pins are labeled<br />
&nbsp; A - connect this to voltage<br />
&nbsp; W - this is the pot's wiper, which changes when you set it<br />
&nbsp; B - connect this to ground.<br />
&nbsp;<br />
&nbsp;The AD5206 is SPI-compatible,and to command it, you send two bytes, <br />
&nbsp;one with the channel number (0 - 5) and one with the resistance value for the<br />
&nbsp;channel (0 - 255). &nbsp;<br />
&nbsp;<br />
&nbsp;The circuit:<br />
&nbsp; * All A pins &nbsp;of AD5206 connected to +5V<br />
&nbsp; * All B pins of AD5206 connected to ground<br />
&nbsp; * An LED and a 220-ohm resisor in series connected from each W pin to ground<br />
&nbsp; * CS - to digital pin 10 &nbsp;(SS pin)<br />
&nbsp; * SDI - to digital pin 11 (MOSI pin)<br />
&nbsp; * CLK - to digital pin 13 (SCK pin)<br />
&nbsp;<br />
&nbsp;created 10 Aug 2010 <br />
&nbsp;by Tom Igoe<br />
&nbsp;<br />
&nbsp;Thanks to Heather Dewey-Hagborg for the original tutorial, 2005<br />
&nbsp;<br />
*/</span><br />
<br />
<br />
<span class="co1">// inslude the SPI library:</span><br />
<span class="co2">#include &lt;SPI.h&gt;</span><br />
<br />
<br />
<span class="co1">// set pin 10 as the slave select for the digital pot:</span><br />
const <span class="kw1">int</span> slaveSelectPin <span class="sy0">=</span> <span class="nu0">10</span><span class="sy0">;</span><br />
<br />
<span class="kw1">void</span> <span class="kw3">setup</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; <span class="co1">// set the slaveSelectPin as an output:</span><br />
&nbsp; <span class="kw1">pinMode</span> <span class="br0">&#40;</span>slaveSelectPin<span class="sy0">,</span> <span class="kw2">OUTPUT</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; <span class="co1">// initialize SPI:</span><br />
&nbsp; SPI.<span class="kw1">begin</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> <br />
<span class="br0">&#125;</span><br />
<br />
<span class="kw1">void</span> <span class="kw3">loop</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; <span class="co1">// go through the six channels of the digital pot:</span><br />
&nbsp; <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw1">int</span> channel <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> channel <span class="sy0">&lt;</span> <span class="nu0">6</span><span class="sy0">;</span> channel<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> <br />
&nbsp; &nbsp; <span class="co1">// change the resistance on this channel from min to max:</span><br />
&nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw1">int</span> level <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> level <span class="sy0">&lt;</span> <span class="nu0">255</span><span class="sy0">;</span> level<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; digitalPotWrite<span class="br0">&#40;</span>channel<span class="sy0">,</span> level<span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; <span class="kw1">delay</span><span class="br0">&#40;</span><span class="nu0">10</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; <span class="br0">&#125;</span><br />
&nbsp; &nbsp; <span class="co1">// wait a second at the top:</span><br />
&nbsp; &nbsp; <span class="kw1">delay</span><span class="br0">&#40;</span><span class="nu0">100</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; <span class="co1">// change the resistance on this channel from max to min:</span><br />
&nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw1">int</span> level <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> level <span class="sy0">&lt;</span> <span class="nu0">255</span><span class="sy0">;</span> level<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; digitalPotWrite<span class="br0">&#40;</span>channel<span class="sy0">,</span> <span class="nu0">255</span> <span class="sy0">-</span> level<span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; <span class="kw1">delay</span><span class="br0">&#40;</span><span class="nu0">10</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; <span class="br0">&#125;</span><br />
&nbsp; <span class="br0">&#125;</span><br />
<br />
<span class="br0">&#125;</span><br />
<br />
<span class="kw1">int</span> digitalPotWrite<span class="br0">&#40;</span><span class="kw1">int</span> address<span class="sy0">,</span> <span class="kw1">int</span> value<span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; <span class="co1">// take the SS pin low to select the chip:</span><br />
&nbsp; <span class="kw1">digitalWrite</span><span class="br0">&#40;</span>slaveSelectPin<span class="sy0">,</span><span class="kw2">LOW</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; <span class="co1">// &nbsp;send in the address and value via SPI:</span><br />
&nbsp; SPI.<span class="kw1">transfer</span><span class="br0">&#40;</span>address<span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; SPI.<span class="kw1">transfer</span><span class="br0">&#40;</span>value<span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; <span class="co1">// take the SS pin high to de-select the chip:</span><br />
&nbsp; <span class="kw1">digitalWrite</span><span class="br0">&#40;</span>slaveSelectPin<span class="sy0">,</span><span class="kw2">HIGH</span><span class="br0">&#41;</span><span class="sy0">;</span> <br />
<span class="br0">&#125;</span></div></div>
  <div class='sourceblocklink'><a href='SPIDigitalPotf687.html?action=sourceblock&amp;num=1' type='text/plain'>[Get Code]</a></div>
</div>

</p>
<p class='vspace'></p></div>
<p class='vspace'></p><h3>See Also:</h3>
<ul><li><a class='wikilink' href='../Reference/SPI.html'>Arduino SPI LIbrary</a>
</li><li><a class='wikilink' href='BarometricPressureSensor.html'>BarometricPressureSensor</a>
</li></ul><p class='vspace'></p><p>original tutorial by Heather Dewey-Hagborg, update by Tom Igoe and
Christian Cerrito
</p>
</div>


<!-- AddThis Button BEGIN -->
<script type="text/javascript">var addthis_language = "en";
</script>
<div class="addthis_container addthis_toolbox addthis_default_style" addthis:url="http://arduino.cc/en/Tutorial/SPIDigitalPot" addthis:title="Arduino Wiki English">
<a href="http://www.addthis.com/bookmark.php?v=250&amp;username=arduinoteam" class="addthis_button_compact">Share</a><span 
class="addthis_separator">|</span><a class="addthis_button_email"></a><a class="addthis_button_favorites"></a><a class="addthis_button_print"></a><a 
class="addthis_button_facebook"></a><a class="addthis_button_twitter"></a><script type="text/javascript" 
src="../../../s7.addthis.com/js/250/addthis_widget.js#username=arduinoteam"></script></div>
<!-- AddThis Button END -->

</div>
<!--PageFooterFmt-->
<div id="pagefooter">
&copy;Arduino | 
  <a href='SPIDigitalPot264b.html?action=edit'>Edit Page</a> | <a href='SPIDigitalPotad68.html?action=diff'>Page History</a> | <a href='SPIDigitalPot60ee.html?action=print' target='_blank'>Printable View</a> | <a href='../Site/AllRecentChanges.html'>All Recent Site Changes</a>
</div>
<!--/PageFooterFmt-->
</div>

<!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? 
"https://stats.arduino.cc/piwik/" : "http://stats.arduino.cc/piwik/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img 
src="http://stats.arduino.cc/piwik/piwik.php?idsite=1" style="border:0" 
alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->

</body>
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>
