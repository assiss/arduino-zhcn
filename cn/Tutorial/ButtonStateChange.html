<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
  <title>Arduino - ButtonStateChange </title>
  <link rel="shortcut icon" type="image/x-icon" href="../favicon.png">
  <link rel='stylesheet' href='../pub/skins/arduinoWide_SSO/arduinoWide_SSO.css' 
type='text/css' />
  <link href="https://plus.google.com/114839908922424087554" rel="publisher" />
    <!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
span.anchor {
	float: left;
	font-size: 10px;
	margin-left: -10px;
	width: 10px;
    position:relative; top:-0.1em;
	text-align: center;
}
span.anchor a { text-decoration: none; }
span.anchor a:hover { text-decoration: underline; }
ol.toc { text-indent:-20px; list-style: none; }
ol.toc ol.toc { text-indent:-40px; }
div.tocfloat { font-size: smaller; margin-bottom: 10px;
    border-top: 1px dotted #555555; border-bottom: 1px dotted #555555;
    padding-top: 5px; padding-bottom: 5px; 
    width: 38%; float: right; margin-left: 10px; clear: right;
    margin-right:-13px; padding-right: 13px; padding-left: 13px;
    background-color: #eeeeee; }
div.toc { font-size: smaller; 
    padding: 5px; border: 1px dotted #cccccc;
    background: #f7f7f7;
    margin-bottom: 10px; }
div.toc p { background-color: #f9f6d6;
    margin-top:-5px;   padding-top: 5px;
    margin-left:-5px;  padding-left: 5px;
    margin-right:-5px; padding-right: 5px;
    padding-bottom: 3px;
    border-bottom:  1px dotted #cccccc; }.editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border: 2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  td.markup1 { border-bottom: 1px solid #ccf; }
  div.faq { margin-left:2em; }
  div.faq p.question { margin: 1em 0 0.75em -2em; font-weight:bold; }
  div.faq hr { margin-left: -2em; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.arduino  {font-family:monospace;}
.arduino .imp {font-weight: bold; color: red;}
.arduino .kw1 {color: #CC6600;}
.arduino .kw2 {color: #006699;}
.arduino .kw3 {color: #CC6600; font-weight: bold;}
.arduino .co1 {color: #7E7E7E; font-style: italic;}
.arduino .co2 {color: #7E7E7E;}
.arduino .coMULTI {color: #7E7E7E; font-style: italic;}
.arduino .es0 {color: #000099; font-weight: bold;}
.arduino .es1 {color: #000099; font-weight: bold;}
.arduino .es2 {color: #660099; font-weight: bold;}
.arduino .es3 {color: #660099; font-weight: bold;}
.arduino .es4 {color: #660099; font-weight: bold;}
.arduino .es5 {color: #006699; font-weight: bold;}
.arduino .br0 {color: #000000;}
.arduino .sy0 {color: #000000;}
.arduino .st0 {color: #0066CC;}
.arduino .nu0 {color: #000000;}
.arduino .nu6 {color: #208080;}
.arduino .nu8 {color: #208080;}
.arduino .nu12 {color: #208080;}
.arduino .nu16 {color:#800080;}
.arduino .nu17 {color:#800080;}
.arduino .nu18 {color:#800080;}
.arduino .nu19 {color:#800080;}
.arduino .me1 {color: #ff1493;}
.arduino .me2 {color: #ff1493;}
.arduino span.xtra { display:block; }

.sourceblocklink {
  text-align: right;
  font-size: smaller;
}
.sourceblocktext {
  padding: 0.5em;
  color: #000000;
  background-color: #ffffff;
}
.sourceblocktext div {
  font-family: monospace;
  font-size: small;
  line-height: 1;
  height: 1%;
}
.sourceblocktext div.head,
.sourceblocktext div.foot {
  font: italic medium serif;
  padding: 0.5em;
}

--></style><script type="text/javascript">
function toggle(obj) {
    var elstyle = document.getElementById(obj).style;
    var text    = document.getElementById(obj + "tog");
    if (elstyle.display == 'none') {
        elstyle.display = 'block';
        text.innerHTML = "hide";
    } else {
        elstyle.display = 'none';
        text.innerHTML = "show";
    }
}
</script>  <meta name='robots' content='index,follow' />

  <meta name="verify-v1" content="TtxFIEJAB6zdJ509wLxjnapQzKAMNm9u0Wj4ho6wxIY=" />
  <script src="https://id.arduino.cc/css/sso_bar_js_2.php?s=reference"></script>
  <link rel="stylesheet" type="text/css" media="screen" href="http://id.arduino.cc/css/sso_bar.css" />
</head>
<body>

		<div id="ssotoolbar">
		  <div id="al">
			<nobr><div id="ssoNavBar">&nbsp;</div></nobr>
		  </div>
		  <div id="ar">
			<nobr>
			  <div id="loginInfo"><div id="loading">Loading...</div></div>
			</nobr>
		  </div>
		</div>
		<script>ssoGenerateNavigationBar('');</script>
<div id="page">
<!--PageHeaderFmt-->
<div id="pageheader">
  <div class="title"><a href='../../en.html'>Arduino</a></div>
  <div class="search">
    <!-- SiteSearch Google -->
    <FORM method=GET action="http://www.google.com/search">
    <input type=hidden name=ie value=UTF-8>
    <input type=hidden name=oe value=UTF-8>
    <INPUT TYPE=text name=q size=25 maxlength=255 value="">
    <INPUT type=submit name=btnG VALUE="search">
    <input type=hidden name=domains value="http://arduino.cc/">
    <input type=hidden name=sitesearch value="http://arduino.cc/">
    </FORM>
    <!-- SiteSearch Google -->
  </div>
</div>
<!--/PageHeaderFmt-->
<!--PageLeftFmt-->
<div id="pagenav">
  <div id="navbar">
  	<p><a class='wikilink' href='../Main/Buy.html'>Buy</a>
<a class='wikilink' href='../Main/Software.html'>Download</a>
<a class='wikilink' href='../Guide/HomePage.html'>Getting Started</a>
<a class='wikilink' href='HomePage.html'>Learning</a>
<a class='wikilink' href='../Reference/HomePage.html'>Reference</a>
<a class='wikilink' href='../Main/Hardware.html'>Hardware</a>
<a class='wikilink' href='../Main/FAQ.html'>FAQ</a>
</p>
<p class='vspace'></p>

  </div>
</div>
<!--/PageLeftFmt-->
<div id="pagetext">
<!--PageText-->
<div id='wikitext'>
<p><strong>Learning</strong> &nbsp;  <a class='wikilink' href='HomePage.html'>Examples</a> | <a class='wikilink' href='Foundations.html'>Foundations</a> | <a class='wikilink' href='../Hacking/HomePage.html'>Hacking</a> | <a class='wikilink' href='Links.html'>Links</a>
</p>
<p class='vspace'></p><p><em>Examples &gt; Digital I/O</em>
</p>
<p class='vspace'></p><h3>Button State Change Detection (Edge Detection)</h3>
<p>Once you've got a <a class='wikilink' href='Button.html'>pushbutton</a> working, you often want to do some action based on how many times the button is pushed. To do this, you need to know when the button changes state from off to on, and count how many times this change of state happens.  This is called <strong>state change detection</strong> or <strong>edge detection.</strong>
</p>
<p class='vspace'></p><h3>Hardware Required</h3>
<ul><li>Arduino Board
</li><li>momentary button or switch
</li><li>10K ohm resistor
</li><li>breadboard
</li><li>hook-up wire
</li></ul><p class='vspace'></p><h3>Circuit</h3>
<div><img src='../uploads/Tutorial/button.png' alt='' title='' /></div>
<p><span style='font-size:83%'>image developed using <a class='urllink' href='http://www.fritzing.org/' rel='nofollow'>Fritzing</a>. For more circuit examples, see the <a class='urllink' href='http://fritzing.org/projects/' rel='nofollow'>Fritzing project page</a> </span>
</p>
<p class='vspace'></p><p>Connect three wires to the Arduino board.  The first goes from one leg of the pushbutton through a pull-down resistor (here 10 <span class='wikiword'>KOhms</span>) to ground.  The second goes from the corresponding leg of the pushbutton to the 5 volt supply.  The third connects to a digital i/o pin (here pin 2) which reads the button's state.
</p>
<p class='vspace'></p><p>When the pushbutton is open (unpressed) there is no connection between the two legs of the pushbutton, so the pin is connected to ground (through the pull-down resistor) and we read a LOW.  When the button is closed (pressed), it makes a connection between its two legs, connecting the pin to voltage, so that we read a HIGH.  (The pin is still connected to ground, but the resistor resists the flow of current, so the path of least resistance is to +5V.)
</p>
<p class='vspace'></p><p>If you disconnect the digital i/o pin from everything, the LED may blink erratically.  This is because the input is "floating" - that is, not connected to either voltage or ground. It will more or less randomly return either HIGH or LOW.  That's why you need a pull-down resistor in the circuit.
</p>
<p class='vspace'></p><h3>Schematic</h3>
<p><span style='font-size:83%'>click the image to enlarge</span>
</p>
<p class='vspace'></p><div><a class='urllink' href='../uploads/Tutorial/button_sch.png' rel='nofollow'><img height='400px' src='../uploads/Tutorial/button_sch.png' alt='' title='' /></a></div>
<p class='vspace'></p><p>The sketch below continually reads the button's state.  It then compares the button's state to its state the last time through the main loop.  If the current button state is different from the last button state and the current button state is high, then the button changed from off to on.  The sketch then increments a button push counter. 
</p>
<p class='vspace'></p><p>The sketch also checks the button push counter's value, and if it's an even multiple of four, it turns the LED on pin 13 ON.  Otherwise, it turns it off.
</p>
<p class='vspace'></p><h3>Code</h3>
<div  class='code' >
<p class='vspace'></p><p>
<div class='sourceblock ' id='sourceblock1'>
  <div class='sourceblocktext'><div class="arduino"><span class="coMULTI">/*<br />
&nbsp; State change detection (edge detection)<br />
&nbsp; &nbsp; <br />
&nbsp;Often, you don't need to know the state of a digital input all the time,<br />
&nbsp;but you just need to know when the input changes from one state to another.<br />
&nbsp;For example, you want to know when a button goes from OFF to ON. &nbsp;This is called<br />
&nbsp;state change detection, or edge detection.<br />
&nbsp;<br />
&nbsp;This example shows how to detect when a button or button changes from off to on<br />
&nbsp;and on to off.<br />
&nbsp; &nbsp; <br />
&nbsp;The circuit:<br />
&nbsp;* pushbutton attached to pin 2 from +5V<br />
&nbsp;* 10K resistor attached to pin 2 from ground<br />
&nbsp;* LED attached from pin 13 to ground (or use the built-in LED on<br />
&nbsp; &nbsp;most Arduino boards)<br />
&nbsp;<br />
&nbsp;created &nbsp;27 Sep 2005<br />
&nbsp;modified 30 Aug 2011<br />
&nbsp;by Tom Igoe<br />
<br />
This example code is in the public domain.<br />
&nbsp; &nbsp; <br />
&nbsp;http://arduino.cc/en/Tutorial/ButtonStateChange<br />
&nbsp;<br />
&nbsp;*/</span><br />
<br />
<span class="co1">// this constant won't change:</span><br />
const <span class="kw1">int</span> &nbsp;buttonPin <span class="sy0">=</span> <span class="nu0">2</span><span class="sy0">;</span> &nbsp; &nbsp;<span class="co1">// the pin that the pushbutton is attached to</span><br />
const <span class="kw1">int</span> ledPin <span class="sy0">=</span> <span class="nu0">13</span><span class="sy0">;</span> &nbsp; &nbsp; &nbsp; <span class="co1">// the pin that the LED is attached to</span><br />
<br />
<span class="co1">// Variables will change:</span><br />
<span class="kw1">int</span> buttonPushCounter <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> &nbsp; <span class="co1">// counter for the number of button presses</span><br />
<span class="kw1">int</span> buttonState <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// current state of the button</span><br />
<span class="kw1">int</span> lastButtonState <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> &nbsp; &nbsp; <span class="co1">// previous state of the button</span><br />
<br />
<span class="kw1">void</span> <span class="kw3">setup</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; <span class="co1">// initialize the button pin as a input:</span><br />
&nbsp; <span class="kw1">pinMode</span><span class="br0">&#40;</span>buttonPin<span class="sy0">,</span> <span class="kw2">INPUT</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; <span class="co1">// initialize the LED as an output:</span><br />
&nbsp; <span class="kw1">pinMode</span><span class="br0">&#40;</span>ledPin<span class="sy0">,</span> <span class="kw2">OUTPUT</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; <span class="co1">// initialize serial communication:</span><br />
&nbsp; <span class="kw1">Serial</span>.<span class="kw1">begin</span><span class="br0">&#40;</span><span class="nu0">9600</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
<span class="br0">&#125;</span><br />
<br />
<br />
<span class="kw1">void</span> <span class="kw3">loop</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; <span class="co1">// read the pushbutton input pin:</span><br />
&nbsp; buttonState <span class="sy0">=</span> <span class="kw1">digitalRead</span><span class="br0">&#40;</span>buttonPin<span class="br0">&#41;</span><span class="sy0">;</span><br />
<br />
&nbsp; <span class="co1">// compare the buttonState to its previous state</span><br />
&nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>buttonState <span class="sy0">!=</span> lastButtonState<span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; <span class="co1">// if the state has changed, increment the counter</span><br />
&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>buttonState <span class="sy0">==</span> <span class="kw2">HIGH</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span class="co1">// if the current state is HIGH then the button</span><br />
&nbsp; &nbsp; &nbsp; <span class="co1">// wend from off to on:</span><br />
&nbsp; &nbsp; &nbsp; buttonPushCounter<span class="sy0">++;</span><br />
&nbsp; &nbsp; &nbsp; <span class="kw1">Serial</span>.<span class="kw1">println</span><span class="br0">&#40;</span><span class="st0">&quot;on&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; <span class="kw1">Serial</span>.<span class="kw1">print</span><span class="br0">&#40;</span><span class="st0">&quot;number of button pushes: &nbsp;&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; &nbsp; <span class="kw1">Serial</span>.<span class="kw1">println</span><span class="br0">&#40;</span>buttonPushCounter<span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; &nbsp; <span class="br0">&#125;</span> <br />
&nbsp; &nbsp; <span class="kw1">else</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; &nbsp; <span class="co1">// if the current state is LOW then the button</span><br />
&nbsp; &nbsp; &nbsp; <span class="co1">// wend from on to off:</span><br />
&nbsp; &nbsp; &nbsp; <span class="kw1">Serial</span>.<span class="kw1">println</span><span class="br0">&#40;</span><span class="st0">&quot;off&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> <br />
&nbsp; &nbsp; <span class="br0">&#125;</span><br />
&nbsp; <span class="br0">&#125;</span><br />
&nbsp; <span class="co1">// save the current state as the last state, </span><br />
&nbsp; <span class="co1">//for next time through the loop</span><br />
&nbsp; lastButtonState <span class="sy0">=</span> buttonState<span class="sy0">;</span><br />
<br />
&nbsp; <br />
&nbsp; <span class="co1">// turns on the LED every four button pushes by </span><br />
&nbsp; <span class="co1">// checking the modulo of the button push counter.</span><br />
&nbsp; <span class="co1">// the modulo function gives you the remainder of </span><br />
&nbsp; <span class="co1">// the division of two numbers:</span><br />
&nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>buttonPushCounter <span class="sy0">%</span> <span class="nu0">4</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp; <span class="kw1">digitalWrite</span><span class="br0">&#40;</span>ledPin<span class="sy0">,</span> <span class="kw2">HIGH</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span><br />
&nbsp; &nbsp;<span class="kw1">digitalWrite</span><span class="br0">&#40;</span>ledPin<span class="sy0">,</span> <span class="kw2">LOW</span><span class="br0">&#41;</span><span class="sy0">;</span><br />
&nbsp; <span class="br0">&#125;</span><br />
&nbsp; <br />
<span class="br0">&#125;</span></div></div>
  <div class='sourceblocklink'><a href='ButtonStateChangef687.html?action=sourceblock&amp;num=1' type='text/plain'>[Get Code]</a></div>
</div>

</p>
<p class='vspace'></p></div>
<p class='vspace'></p><h3>See Also:</h3>
<ul><li><a class='wikilink' href='../Reference/PinMode.html'>pinMode</a>()   
</li><li><a class='wikilink' href='../Reference/DigitalWrite.html'>digitalWrite</a>() 
</li><li><a class='wikilink' href='../Reference/DigitalRead.html'>digitalRead</a>()
</li><li><a class='wikilink' href='../Reference/If.html'>if</a>()
</li><li><a class='wikilink' href='../Reference/Millis.html'>millis</a>()
<p class='vspace'></p></li><li><a class='wikilink' href='DigitalReadSerial.html'>DigitalReadSerial</a> - read a switch, print the state out to the Serial Monitor
</li><li><a class='wikilink' href='BlinkWithoutDelay.html'>BlinkWithoutDelay</a> - blinking an LED without using the delay() function
</li><li><a class='wikilink' href='Blink.html'>Blink</a> - turn an LED on and off
</li></ul>
</div>


<!-- AddThis Button BEGIN -->
<script type="text/javascript">var addthis_language = "en";
</script>
<div class="addthis_container addthis_toolbox addthis_default_style" addthis:url="http://arduino.cc/en/Tutorial/ButtonStateChange" addthis:title="Arduino Wiki English">
<a href="http://www.addthis.com/bookmark.php?v=250&amp;username=arduinoteam" class="addthis_button_compact">Share</a><span 
class="addthis_separator">|</span><a class="addthis_button_email"></a><a class="addthis_button_favorites"></a><a class="addthis_button_print"></a><a 
class="addthis_button_facebook"></a><a class="addthis_button_twitter"></a><script type="text/javascript" 
src="../../../s7.addthis.com/js/250/addthis_widget.js#username=arduinoteam"></script></div>
<!-- AddThis Button END -->

</div>
<!--PageFooterFmt-->
<div id="pagefooter">
&copy;Arduino | 
  <a href='ButtonStateChange264b.html?action=edit'>Edit Page</a> | <a href='ButtonStateChangead68.html?action=diff'>Page History</a> | <a href='ButtonStateChange60ee.html?action=print' target='_blank'>Printable View</a> | <a href='../Site/AllRecentChanges.html'>All Recent Site Changes</a>
</div>
<!--/PageFooterFmt-->
</div>

<!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? 
"https://stats.arduino.cc/piwik/" : "http://stats.arduino.cc/piwik/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img 
src="http://stats.arduino.cc/piwik/piwik.php?idsite=1" style="border:0" 
alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->

</body>
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>
