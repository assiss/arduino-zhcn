<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
  <title>Arduino - Firmata </title>
  <link rel="shortcut icon" type="image/x-icon" href="../favicon.png">
  <link rel='stylesheet' href='../pub/skins/arduinoWide_SSO/arduinoWide_SSO.css' 
type='text/css' />
  <link href="https://plus.google.com/114839908922424087554" rel="publisher" />
    <!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
span.anchor {
	float: left;
	font-size: 10px;
	margin-left: -10px;
	width: 10px;
    position:relative; top:-0.1em;
	text-align: center;
}
span.anchor a { text-decoration: none; }
span.anchor a:hover { text-decoration: underline; }
ol.toc { text-indent:-20px; list-style: none; }
ol.toc ol.toc { text-indent:-40px; }
div.tocfloat { font-size: smaller; margin-bottom: 10px;
    border-top: 1px dotted #555555; border-bottom: 1px dotted #555555;
    padding-top: 5px; padding-bottom: 5px; 
    width: 38%; float: right; margin-left: 10px; clear: right;
    margin-right:-13px; padding-right: 13px; padding-left: 13px;
    background-color: #eeeeee; }
div.toc { font-size: smaller; 
    padding: 5px; border: 1px dotted #cccccc;
    background: #f7f7f7;
    margin-bottom: 10px; }
div.toc p { background-color: #f9f6d6;
    margin-top:-5px;   padding-top: 5px;
    margin-left:-5px;  padding-left: 5px;
    margin-right:-5px; padding-right: 5px;
    padding-bottom: 3px;
    border-bottom:  1px dotted #cccccc; }.editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border: 2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  td.markup1 { border-bottom: 1px solid #ccf; }
  div.faq { margin-left:2em; }
  div.faq p.question { margin: 1em 0 0.75em -2em; font-weight:bold; }
  div.faq hr { margin-left: -2em; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style><script type="text/javascript">
function toggle(obj) {
    var elstyle = document.getElementById(obj).style;
    var text    = document.getElementById(obj + "tog");
    if (elstyle.display == 'none') {
        elstyle.display = 'block';
        text.innerHTML = "hide";
    } else {
        elstyle.display = 'none';
        text.innerHTML = "show";
    }
}
</script>  <meta name='robots' content='index,follow' />

  <meta name="verify-v1" content="TtxFIEJAB6zdJ509wLxjnapQzKAMNm9u0Wj4ho6wxIY=" />
  <script src="https://id.arduino.cc/css/sso_bar_js_2.php?s=reference"></script>
  <link rel="stylesheet" type="text/css" media="screen" href="../../../id.arduino.cc/css/sso_bar.css" />
</head>
<body>

		<div id="ssotoolbar">
		  <div id="al">
			<nobr><div id="ssoNavBar">&nbsp;</div></nobr>
		  </div>
		  <div id="ar">
			<nobr>
			  <div id="loginInfo"><div id="loading">Loading...</div></div>
			</nobr>
		  </div>
		</div>
		<script>ssoGenerateNavigationBar('');</script>
<div id="page">
<!--PageHeaderFmt-->
<div id="pageheader">
  <div class="title"><a href='../../en.html'>Arduino</a></div>
  <div class="search">
    <!-- SiteSearch Google -->
    <FORM method=GET action="http://www.google.com/search">
    <input type=hidden name=ie value=UTF-8>
    <input type=hidden name=oe value=UTF-8>
    <INPUT TYPE=text name=q size=25 maxlength=255 value="">
    <INPUT type=submit name=btnG VALUE="search">
    <input type=hidden name=domains value="http://arduino.cc/">
    <input type=hidden name=sitesearch value="http://arduino.cc/">
    </FORM>
    <!-- SiteSearch Google -->
  </div>
</div>
<!--/PageHeaderFmt-->
<!--PageLeftFmt-->
<div id="pagenav">
  <div id="navbar">
  	<p><a class='wikilink' href='../Main/Buy.html'>Buy</a>
<a class='wikilink' href='../Main/Software.html'>Download</a>
<a class='wikilink' href='../Guide/HomePage.html'>Getting Started</a>
<a class='wikilink' href='../Tutorial/HomePage.html'>Learning</a>
<a class='wikilink' href='HomePage.html'>Reference</a>
<a class='wikilink' href='../Main/Hardware.html'>Hardware</a>
<a class='wikilink' href='../Main/FAQ.html'>FAQ</a>
</p>
<p class='vspace'></p>

  </div>
</div>
<!--/PageLeftFmt-->
<div id="pagetext">
<!--PageText-->
<div id='wikitext'>
<p><strong>Reference</strong> &nbsp;  <a class='wikilink' href='HomePage.html'>Language</a> | <a class='wikilink' href='Libraries.html'>Libraries</a> | <a class='wikilink' href='Comparison.html'>Comparison</a> | <a class='wikilink' href='Changes.html'>Changes</a>
</p>
<p class='vspace'></p><hr />
<p><a class='urllink' href='http://arduino.cc/playground/Interfacing/Firmata' rel='nofollow'>Firmata</a> - Library - <a class='urllink' href='http://arduino.cc/playground/Interfacing/FirmataBaudRateDetails' rel='nofollow'>Baud Rate Details</a> - <a class='urllink' href='http://arduino.cc/playground/Interfacing/FirmataProtocolDetails' rel='nofollow'>Protocol Details</a> - <a class='urllink' href='http://arduino.cc/playground/Interfacing/FirmataProtocolProposals' rel='nofollow'>Protocol Proposals</a>
</p><hr />
<h1>Firmata Library</h1>
<p>The <strong>Firmata</strong> library implements the Firmata protocol for communicating with software on the host computer.  This allows you to write custom firmware without having to create your own protocol and objects for the programming environment that you are using.
</p>
<p class='vspace'></p><h2>Methods</h2>
<dl><dt><code>begin()</code></dt><dd>start the library
</dd><dt><code>begin(long)</code></dt><dd>start the library and override the default baud rate
</dd><dt><code>printVersion()</code></dt><dd>send the protocol version to the host computer
</dd><dt><code>blinkVersion()</code></dt><dd>blink the protocol version on pin 13
</dd><dt><code>printFirmwareVersion()</code></dt><dd>send the firmware name and version to the host computer
</dd><dt><code>setFirmwareVersion(byte major, byte minor)</code></dt><dd>set the firmware name and version, using the sketch's filename, minus the <em>.pde</em>
</dd></dl><p class='vspace'></p><h4>Sending Messages</h4>
<dl><dt><code>sendAnalog(byte pin, int value)</code></dt><dd>send an analog message
</dd><dt><code>sendDigitalPorts(byte pin, byte firstPort, byte secondPort)</code></dt><dd>send digital ports as individual bytes
</dd><dt><code>sendDigitalPortPair(byte pin, int value)</code></dt><dd>send digital ports as one int
</dd><dt><code>sendSysex(byte command, byte bytec, byte* bytev)</code></dt><dd>send a command with an arbitrary array of bytes
</dd><dt><code>sendString(const char* string)</code></dt><dd>send a string to the host computer
</dd><dt><code>sendString(byte command, const char* string)</code></dt><dd>send a string to the host computer using a custom command type
</dd></dl><p class='vspace'></p><h4>Receiving Messages</h4>
<dl><dt><code>available()</code></dt><dd>check to see if there are any incoming messages in the buffer
</dd><dt><code>processInput()</code></dt><dd>process incoming messages from the buffer, sending the data to any registered callback functions
</dd><dt><code>attach(byte command, callbackFunction myFunction)</code></dt><dd>attach a function to an incoming message type
</dd><dt><code>detach(byte command)</code></dt><dd>detach a function from an incoming message type
</dd></dl><p class='vspace'></p><h2>Callback Functions</h2>
<p>In order to attach your function to a message type, your function must match the standard callback function.  There are currently three types of callback functions in Firmata: <em>generic</em>, <em>string</em>, and <em>sysex</em>.
</p>
<p class='vspace'></p><dl><dt>generic</dt><dd><code>void callbackFunction(byte pin, int value);</code>
</dd><dt>system_reset</dt><dd><code>void systemResetCallbackFunction(void);</code>
</dd><dt>string</dt><dd><code>void stringCallbackFunction(char *myString);</code>
</dd><dt>sysex</dt><dd><code>void sysexCallbackFunction(byte pin, byte byteCount, byte *arrayPointer);</code>
</dd></dl><p class='vspace'></p><h4>Message Types</h4>
<p>These are the various message types that you can attach functions to.
</p>
<p class='vspace'></p><dl><dt><code>ANALOG_MESSAGE</code></dt><dd>the analog value for a single pin
</dd><dt><code>DIGITAL_MESSAGE</code></dt><dd>8-bits of digital pin data (one port)
</dd><dt><code>REPORT_ANALOG</code></dt><dd>enable/disable the reporting of analog pin
</dd><dt><code>REPORT_DIGITAL</code></dt><dd>enable/disable the reporting of a digital port
</dd><dt><code>SET_PIN_MODE</code></dt><dd>change the pin mode between <code>INPUT</code>/<code>OUTPUT</code>/<code>PWM</code>/etc.
</dd><dt><code>FIRMATA_STRING</code></dt><dd>C-style strings, uses <code>stringCallbackFunction</code> for the function type
</dd><dt><code>SYSEX_START</code></dt><dd>generic, arbitrary length messages (via MIDI <span class='wikiword'>SysEx</span> protocol), uses <code>sysexCallbackFunction</code> for the function type
</dd><dt><code>SYSTEM_RESET</code></dt><dd>message to reset firmware to its default state, uses <code>systemResetCallbackFunction</code> for the function type
</dd></dl><p class='vspace'></p><h2>Example</h2>
<p>This example shows how to send and receive analog messages using Firmata.
</p>
<p class='vspace'></p><pre>
#include &lt;Firmata.h&gt;

byte analogPin;

void analogWriteCallback(byte pin, int value)
{
    pinMode(pin,OUTPUT);
    analogWrite(pin, value);
}

void setup()
{
    Firmata.setFirmwareVersion(0, 1);
    Firmata.attach(ANALOG_MESSAGE, analogWriteCallback);
    Firmata.begin();
}

void loop()
{
    while(Firmata.available()) {
        Firmata.processInput();
    }
    for(analogPin = 0; analogPin &lt; TOTAL_ANALOG_PINS; analogPin++) {
        Firmata.sendAnalog(analogPin, analogRead(analogPin)); 
    }
}

</pre>
<p class='vspace'></p><p><a class='wikilink' href='HomePage.html'>Reference Home</a>
</p>
<p class='vspace'></p><p><em>Corrections, suggestions, and new documentation should be posted to the <a class='urllink' href='http://arduino.cc/forum/index.php/board,23.0.html' rel='nofollow'>Forum</a>.</em>
</p>
<p class='vspace'></p><p>The text of the Arduino reference is licensed under a
<a class='urllink' href='http://creativecommons.org/licenses/by-sa/3.0/' rel='nofollow'>Creative Commons Attribution-ShareAlike 3.0 License</a>.  Code samples in the reference are released into the public domain.
</p>
</div>


<!-- AddThis Button BEGIN -->
<script type="text/javascript">var addthis_language = "en";
</script>
<div class="addthis_container addthis_toolbox addthis_default_style" addthis:url="http://arduino.cc/en/Reference/Firmata" addthis:title="Arduino Wiki English">
<a href="http://www.addthis.com/bookmark.php?v=250&amp;username=arduinoteam" class="addthis_button_compact">Share</a><span 
class="addthis_separator">|</span><a class="addthis_button_email"></a><a class="addthis_button_favorites"></a><a class="addthis_button_print"></a><a 
class="addthis_button_facebook"></a><a class="addthis_button_twitter"></a><script type="text/javascript" 
src="../../../s7.addthis.com/js/250/addthis_widget.js#username=arduinoteam"></script></div>
<!-- AddThis Button END -->

</div>
<!--PageFooterFmt-->
<div id="pagefooter">
&copy;Arduino | 
  <a href='Firmata264b.html?action=edit'>Edit Page</a> | <a href='Firmataad68.html?action=diff'>Page History</a> | <a href='Firmata60ee.html?action=print' target='_blank'>Printable View</a> | <a href='../Site/AllRecentChanges.html'>All Recent Site Changes</a>
</div>
<!--/PageFooterFmt-->
</div>

<!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? 
"https://stats.arduino.cc/piwik/" : "http://stats.arduino.cc/piwik/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img 
src="http://stats.arduino.cc/piwik/piwik.php?idsite=1" style="border:0" 
alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->

</body>
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>
