<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
  <title>Arduino - Bootloader </title>
  <link rel="shortcut icon" type="image/x-icon" href="../favicon.png">
  <link rel='stylesheet' href='../pub/skins/arduinoWide_SSO/arduinoWide_SSO.css' 
type='text/css' />
  <link href="https://plus.google.com/114839908922424087554" rel="publisher" />
    <!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
span.anchor {
	float: left;
	font-size: 10px;
	margin-left: -10px;
	width: 10px;
    position:relative; top:-0.1em;
	text-align: center;
}
span.anchor a { text-decoration: none; }
span.anchor a:hover { text-decoration: underline; }
ol.toc { text-indent:-20px; list-style: none; }
ol.toc ol.toc { text-indent:-40px; }
div.tocfloat { font-size: smaller; margin-bottom: 10px;
    border-top: 1px dotted #555555; border-bottom: 1px dotted #555555;
    padding-top: 5px; padding-bottom: 5px; 
    width: 38%; float: right; margin-left: 10px; clear: right;
    margin-right:-13px; padding-right: 13px; padding-left: 13px;
    background-color: #eeeeee; }
div.toc { font-size: smaller; 
    padding: 5px; border: 1px dotted #cccccc;
    background: #f7f7f7;
    margin-bottom: 10px; }
div.toc p { background-color: #f9f6d6;
    margin-top:-5px;   padding-top: 5px;
    margin-left:-5px;  padding-left: 5px;
    margin-right:-5px; padding-right: 5px;
    padding-bottom: 3px;
    border-bottom:  1px dotted #cccccc; }.editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border: 2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  td.markup1 { border-bottom: 1px solid #ccf; }
  div.faq { margin-left:2em; }
  div.faq p.question { margin: 1em 0 0.75em -2em; font-weight:bold; }
  div.faq hr { margin-left: -2em; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style><script type="text/javascript">
function toggle(obj) {
    var elstyle = document.getElementById(obj).style;
    var text    = document.getElementById(obj + "tog");
    if (elstyle.display == 'none') {
        elstyle.display = 'block';
        text.innerHTML = "hide";
    } else {
        elstyle.display = 'none';
        text.innerHTML = "show";
    }
}
</script>  <meta name='robots' content='index,follow' />

  <meta name="verify-v1" content="TtxFIEJAB6zdJ509wLxjnapQzKAMNm9u0Wj4ho6wxIY=" />
  <script src="https://id.arduino.cc/css/sso_bar_js_2.php?s=reference"></script>
  <link rel="stylesheet" type="text/css" media="screen" href="../../../id.arduino.cc/css/sso_bar.css" />
</head>
<body>

		<div id="ssotoolbar">
		  <div id="al">
			<nobr><div id="ssoNavBar">&nbsp;</div></nobr>
		  </div>
		  <div id="ar">
			<nobr>
			  <div id="loginInfo"><div id="loading">Loading...</div></div>
			</nobr>
		  </div>
		</div>
		<script>ssoGenerateNavigationBar('');</script>
<div id="page">
<!--PageHeaderFmt-->
<div id="pageheader">
  <div class="title"><a href='../../en.html'>Arduino</a></div>
  <div class="search">
    <!-- SiteSearch Google -->
    <FORM method=GET action="http://www.google.com/search">
    <input type=hidden name=ie value=UTF-8>
    <input type=hidden name=oe value=UTF-8>
    <INPUT TYPE=text name=q size=25 maxlength=255 value="">
    <INPUT type=submit name=btnG VALUE="search">
    <input type=hidden name=domains value="http://arduino.cc/">
    <input type=hidden name=sitesearch value="http://arduino.cc/">
    </FORM>
    <!-- SiteSearch Google -->
  </div>
</div>
<!--/PageHeaderFmt-->
<!--PageLeftFmt-->
<div id="pagenav">
  <div id="navbar">
  	<p><a class='wikilink' href='../Main/Buy.html'>Buy</a>
<a class='wikilink' href='../Main/Software.html'>Download</a>
<a class='wikilink' href='../Guide/HomePage.html'>Getting Started</a>
<a class='wikilink' href='../Tutorial/HomePage.html'>Learning</a>
<a class='wikilink' href='../Reference/HomePage.html'>Reference</a>
<a class='wikilink' href='../Main/Hardware.html'>Hardware</a>
<a class='wikilink' href='../Main/FAQ.html'>FAQ</a>
</p>
<p class='vspace'></p>

  </div>
</div>
<!--/PageLeftFmt-->
<div id="pagetext">
<!--PageText-->
<div id='wikitext'>
<p><i>(redirected from 
    <a rel='nofollow' href='../Main/Bootloader264b.html?action=edit'>Main.Bootloader</a>)</i></p><p class='vspace'></p>
<p><strong>Learning</strong> &nbsp;  <a class='wikilink' href='../Tutorial/HomePage.html'>Examples</a> | <a class='wikilink' href='../Tutorial/Foundations.html'>Foundations</a> | <a class='wikilink' href='HomePage.html'>Hacking</a> | <a class='wikilink' href='../Tutorial/Links.html'>Links</a>
</p>
<p class='vspace'></p><h2>Bootloader Development</h2>
<h4>What's a bootloader?</h4>
<p>See <a class='wikilink' href='../Guide/Environment5078.html'>this page</a> for an explanation of what a bootloader is and why we're using one.
</p>
<p class='vspace'></p><h4>Not using a bootloader</h4>
<p>If you want to use the full program space (flash) of the chip or avoid the bootloader delay, you can burn your sketches using an external <a class='wikilink' href='Programmer.html'>programmer</a>.
</p>
<p class='vspace'></p><h4>Burning the Bootloader</h4>
<p>To burn the bootloader, you'll need to buy an <a class='urllink' href='http://www.atmel.com/dyn/products/tools_card.asp?tool_id=2726' rel='nofollow'>AVR-ISP</a> (in-system programmer), <a class='urllink' href='http://www.ladyada.net/make/usbtinyisp/' rel='nofollow'>USBtinyISP</a> or build a <a class='wikilink' href='ParallelProgrammer.html'>ParallelProgrammer</a>.  The programmer should be connected to the ICSP pins (the 2 by 3 pin header) - make sure you plug it in the right way. The board must be powered by an external power supply or the USB port.
</p>
<p class='vspace'></p><p>Make sure you have the right item selected in the <strong>Tools | Board</strong> menu.  Then, just launch the appropriate command from the Tools &gt; Burn Bootloader menu of the Arduino environment.  Burning the bootloader may take 15 seconds or more, so be patient.  
</p>
<p class='vspace'></p><h4>Bootloading an Arduino Mini</h4>
<p>Here are some instructions on  <a class='wikilink' href='MiniBootloader.html'>bootloading the Mini</a>, thanks to Gian Pablo Vilamil.
</p>
<p class='vspace'></p><h4>It still doesn't work! (parallel programmer on Windows XP)</h4>
<p>Windows XP may be polling your parallel port and disrupting the bootloader burning process.  You'll need this <a class='urllink' href='http://www.melabs.com/downloads/XP_stop_polling.reg' rel='nofollow'>registry patch</a>:
</p>
<p class='vspace'></p><pre> 
[HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\Parport\Parameters]
"DisableWarmPoll"=dword:00000001

</pre>
<p class='vspace'></p><p>See this <a class='urllink' href='http://arduino.cc/cgi-bin/yabb2/YaBB.pl?num=1142106610' rel='nofollow'>forum thread</a> for details.
</p>
<p class='vspace'></p><h4>Versions of the bootloader</h4>
<p>There are different versions of the bootloader - both in order to work on different hardware and because it has changed over time.
</p>
<p class='vspace'></p><p>The current bootloaders (i.e. the ones included in Arduino 0009) are almost identical for the Diecimila and NG (with <span class='wikiword'>ATmega168</span>).  They both run at 19200 baud and take up 2 KB of flash memory on the <span class='wikiword'>ATmega168</span>.  The only differences is the time the bootloader waits for a new program to arrive and the number of times it flashes the pin 13 LED when it starts.  Because of the automatic reset on the Diecimila, its bootloader needs only wait a very short amount of time (less than a second) - to save time, it also flashes the pin 13 LED only once.  The NG bootloader waits about 6-8 seconds and flashes the LED three times.
</p>
<p class='vspace'></p><p>The bootloader that actually shipped on the Arduino NG is slightly different.  It enables the internal pullup resistor on pin 6, and doesn't enable the internal pullup on the RX pin.  Nor does it timeout upon receiving invalid data, so if you send data to it immediately after it resets, your sketch will never start.
</p>
<p class='vspace'></p><p>The Arduino BT bootloader does some initial configuration of the bluetooth module.  
</p>
<p class='vspace'></p><p>The <span class='wikiword'>ATmega8</span> bootloader only takes up 1 KB of flash.  It does not timeout when it receives invalid data, you need to make sure that no data is sent to the board during the 6-8 seconds when the bootloader is running.
</p>
<p class='vspace'></p><p>Some ancient versions of the bootloader run at 9600 baud (instead of 19200).  In order to successfully upload sketches to boards with this bootloader, you'll need to change the serial.download_rate in your <a class='wikilink' href='Preferences.html'>preferences file</a>  to 9600.
</p>
<p class='vspace'></p><p>Third parties have also worked on the bootloader. This page is link to some other <a class='urllink' href='http://arduino.cc/playground/Code/BootloaderDevelopment' rel='nofollow'>bootloader development</a>
</p>
<p class='vspace'></p><h4>How does it work?</h4>
<p>The "Burn Bootloader" commands in the Arduino environment use an open-source tool, avrdude.  There are four steps: unlocking the bootloader section of the chip, setting the the fuses on the chip, uploading the bootloader code to the chip, and locking the bootloader section of the chip.  These are controlled by a number of preferences in the Arduino <a class='wikilink' href='Preferences.html'>preferences file</a>.
</p>
<p class='vspace'></p><p>For the <span class='wikiword'>ATmega8</span> bootloader, these are:
</p>
<p class='vspace'></p><ul><li>bootloader.atmega8.programmer (default value: stk500) is the protocal used by the bootloader.
<p class='vspace'></p></li><li>bootloader.atmega8.unlock_bits (default value: 0xFF) is the value to write to the <span class='wikiword'>ATmega8</span> lock byte to unlock the bootloader section.
<p class='vspace'></p></li><li>bootloader.atmega8.high_fuses (default value: 0xca) is the value to write to the high byte of the <span class='wikiword'>ATmega8</span> fuses.
<p class='vspace'></p></li><li>bootloader.atmega8.low_fuses (default value: 0xdf) is the value to write to the low byte of the <span class='wikiword'>ATmega8</span> fuses.
<p class='vspace'></p></li><li>bootloader.atmega8.path (default value: bootloader) is the path (relative to the Arduino application directory) containing the precompiled bootloader.
<p class='vspace'></p></li><li>bootloader.atmega8.file (default value: <span class='wikiword'>ATmegaBOOT</span>.hex) is the name of the file containing the precompiled bootloader code (in bootloader.path).
<p class='vspace'></p></li><li>bootloader.atmega8.lock_bits (default value: 0x0F) is the value to write to the <span class='wikiword'>ATmega8</span> lock byte to lock the bootloader section (so it doesn't get accidently overwritten when you upload a sketch).
</li></ul><p class='vspace'></p><p>For the <span class='wikiword'>ATmega168</span>, these are (where &lt;BOARD&gt; is either "diecimila" or "ng"):
</p>
<p class='vspace'></p><ul><li>bootloader.atmega168-&lt;BOARD&gt;.programmer (default value: avrispmkii) is the protocal used by the bootloader.
<p class='vspace'></p></li><li>bootloader.atmega168-&lt;BOARD&gt;.unlock_bits (default value: 0x3F) is the value to write to the <span class='wikiword'>ATmega168</span> lock byte to unlock the bootloader section.
<p class='vspace'></p></li><li>bootloader.atmega168-&lt;BOARD&gt;.extended_fuses (default value: 0x00) is the value to write to the high byte of the <span class='wikiword'>ATmega168</span> fuses.
<p class='vspace'></p></li><li>bootloader.atmega168-&lt;BOARD&gt;.high_fuses (default value: 0xdd) is the value to write to the high byte of the <span class='wikiword'>ATmega168</span> fuses.
<p class='vspace'></p></li><li>bootloader.atmega168-&lt;BOARD&gt;.low_fuses (default value: 0xff) is the value to write to the low byte of the <span class='wikiword'>ATmega168</span> fuses.
<p class='vspace'></p></li><li>bootloader.atmega168-&lt;BOARD&gt;.path (default value: bootloader168) is the path (relative to the Arduino application directory) containing the precompiled bootloader.
<p class='vspace'></p></li><li>bootloader.atmega168-&lt;BOARD&gt;.file (default value: <span class='wikiword'>ATmegaBOOT</span>_168_&lt;BOARD&gt;.hex) is the name of the file containing the precompiled bootloader code (in bootloader.path).
<p class='vspace'></p></li><li>bootloader.atmega168-&lt;BOARD&gt;.lock_bits (default value: 0x0F) is the value to write to the <span class='wikiword'>ATmega168</span> lock byte to lock the bootloader section (so it doesn't get accidently overwritten when you upload a sketch).
</li></ul><p class='vspace'></p><h4>Source Code</h4>
<p>The <a class='urllink' href='http://code.google.com/p/arduino/source/browse/#svn/trunk/hardware/bootloaders' rel='nofollow'>bootloader source code</a> is available.
</p>
</div>


<!-- AddThis Button BEGIN -->
<script type="text/javascript">var addthis_language = "en";
</script>
<div class="addthis_container addthis_toolbox addthis_default_style" addthis:url="http://arduino.cc/en/Hacking/Bootloader" addthis:title="Arduino Wiki English">
<a href="http://www.addthis.com/bookmark.php?v=250&amp;username=arduinoteam" class="addthis_button_compact">Share</a><span 
class="addthis_separator">|</span><a class="addthis_button_email"></a><a class="addthis_button_favorites"></a><a class="addthis_button_print"></a><a 
class="addthis_button_facebook"></a><a class="addthis_button_twitter"></a><script type="text/javascript" 
src="../../../s7.addthis.com/js/250/addthis_widget.js#username=arduinoteam"></script></div>
<!-- AddThis Button END -->

</div>
<!--PageFooterFmt-->
<div id="pagefooter">
&copy;Arduino | 
  <a href='Bootloader264b.html?action=edit'>Edit Page</a> | <a href='Bootloaderad68.html?action=diff'>Page History</a> | <a href='Bootloader60ee.html?action=print' target='_blank'>Printable View</a> | <a href='../Site/AllRecentChanges.html'>All Recent Site Changes</a>
</div>
<!--/PageFooterFmt-->
</div>

<!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? 
"https://stats.arduino.cc/piwik/" : "http://stats.arduino.cc/piwik/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img 
src="http://stats.arduino.cc/piwik/piwik.php?idsite=1" style="border:0" 
alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->

</body>
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>
