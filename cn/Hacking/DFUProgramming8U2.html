<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
  <title>Arduino - DFUProgramming8U2 </title>
  <link rel="shortcut icon" type="image/x-icon" href="../favicon.png">
  <link rel='stylesheet' href='../pub/skins/arduinoWide_SSO/arduinoWide_SSO.css' 
type='text/css' />
  <link href="https://plus.google.com/114839908922424087554" rel="publisher" />
    <!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
span.anchor {
	float: left;
	font-size: 10px;
	margin-left: -10px;
	width: 10px;
    position:relative; top:-0.1em;
	text-align: center;
}
span.anchor a { text-decoration: none; }
span.anchor a:hover { text-decoration: underline; }
ol.toc { text-indent:-20px; list-style: none; }
ol.toc ol.toc { text-indent:-40px; }
div.tocfloat { font-size: smaller; margin-bottom: 10px;
    border-top: 1px dotted #555555; border-bottom: 1px dotted #555555;
    padding-top: 5px; padding-bottom: 5px; 
    width: 38%; float: right; margin-left: 10px; clear: right;
    margin-right:-13px; padding-right: 13px; padding-left: 13px;
    background-color: #eeeeee; }
div.toc { font-size: smaller; 
    padding: 5px; border: 1px dotted #cccccc;
    background: #f7f7f7;
    margin-bottom: 10px; }
div.toc p { background-color: #f9f6d6;
    margin-top:-5px;   padding-top: 5px;
    margin-left:-5px;  padding-left: 5px;
    margin-right:-5px; padding-right: 5px;
    padding-bottom: 3px;
    border-bottom:  1px dotted #cccccc; }.editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border: 2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  td.markup1 { border-bottom: 1px solid #ccf; }
  div.faq { margin-left:2em; }
  div.faq p.question { margin: 1em 0 0.75em -2em; font-weight:bold; }
  div.faq hr { margin-left: -2em; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style><script type="text/javascript">
function toggle(obj) {
    var elstyle = document.getElementById(obj).style;
    var text    = document.getElementById(obj + "tog");
    if (elstyle.display == 'none') {
        elstyle.display = 'block';
        text.innerHTML = "hide";
    } else {
        elstyle.display = 'none';
        text.innerHTML = "show";
    }
}
</script>  <meta name='robots' content='index,follow' />

  <meta name="verify-v1" content="TtxFIEJAB6zdJ509wLxjnapQzKAMNm9u0Wj4ho6wxIY=" />
  <script src="https://id.arduino.cc/css/sso_bar_js_2.php?s=reference"></script>
  <link rel="stylesheet" type="text/css" media="screen" href="http://id.arduino.cc/css/sso_bar.css" />
</head>
<body>

		<div id="ssotoolbar">
		  <div id="al">
			<nobr><div id="ssoNavBar">&nbsp;</div></nobr>
		  </div>
		  <div id="ar">
			<nobr>
			  <div id="loginInfo"><div id="loading">Loading...</div></div>
			</nobr>
		  </div>
		</div>
		<script>ssoGenerateNavigationBar('');</script>
<div id="page">
<!--PageHeaderFmt-->
<div id="pageheader">
  <div class="title"><a href='../../en.html'>Arduino</a></div>
  <div class="search">
    <!-- SiteSearch Google -->
    <FORM method=GET action="http://www.google.com/search">
    <input type=hidden name=ie value=UTF-8>
    <input type=hidden name=oe value=UTF-8>
    <INPUT TYPE=text name=q size=25 maxlength=255 value="">
    <INPUT type=submit name=btnG VALUE="search">
    <input type=hidden name=domains value="http://arduino.cc/">
    <input type=hidden name=sitesearch value="http://arduino.cc/">
    </FORM>
    <!-- SiteSearch Google -->
  </div>
</div>
<!--/PageHeaderFmt-->
<!--PageLeftFmt-->
<div id="pagenav">
  <div id="navbar">
  	<p><a class='wikilink' href='../Main/Buy.html'>Buy</a>
<a class='wikilink' href='../Main/Software.html'>Download</a>
<a class='wikilink' href='../Guide/HomePage.html'>Getting Started</a>
<a class='wikilink' href='../Tutorial/HomePage.html'>Learning</a>
<a class='wikilink' href='../Reference/HomePage.html'>Reference</a>
<a class='wikilink' href='../Main/Hardware.html'>Hardware</a>
<a class='wikilink' href='../Main/FAQ.html'>FAQ</a>
</p>
<p class='vspace'></p>

  </div>
</div>
<!--/PageLeftFmt-->
<div id="pagetext">
<!--PageText-->
<div id='wikitext'>
<p><strong>Learning</strong> &nbsp;  <a class='wikilink' href='../Tutorial/HomePage.html'>Examples</a> | <a class='wikilink' href='../Tutorial/Foundations.html'>Foundations</a> | <a class='wikilink' href='HomePage.html'>Hacking</a> | <a class='wikilink' href='../Tutorial/Links.html'>Links</a>
</p>
<p class='vspace'></p><h2>Updating the <span class='wikiword'>Atmega8U2</span> on an Uno or Mega2560 using DFU</h2>
<p>The <span class='wikiword'>ATmega8U2</span> chip on your Arduino board acts as a bridge between the computer's USB port and the main processor's serial port. It runs software called firmware (so named because you couldn't change it once it had been programmed in the chip) that can be updated through a special usb protocol called DFU (Device Firmware Update).
</p>
<p class='vspace'></p><p>Here's how to update the firmware on your 8u2 in a few steps.
</p>
<p class='vspace'></p><h3>Check whether you need to update the firmware</h3>
<p>The Arduino Uno and Mega 2560 have been shipping with the updated (rev. 0001) version of the <span class='wikiword'>ATmega8U2</span> firmware since around May, 2011.  To check which version of the firmware is on your board, connect it to your computer and follow the directions for your operating system:
</p>
<p class='vspace'></p><ul><li><em>Windows</em>: locate the board in the Device Manager (it should be under Ports), right click on it and select "Properties"; in the resulting dialog, click on "driver details" in the "driver" tab.  In one the properties, you should the VID, PID, and the revision number.
<p class='vspace'></p></li><li><em>Mac OS X</em>: run the System Profiler application (e.g. by selecting "About This Mac" from the Apple menu and clicking the "More Info..." button); go to the USB sheet and click on the item for the Arduino board.  The 8U2 firmware version is listed as "version" (e.g. 0.01 for rev. 0001).
</li></ul><p class='vspace'></p><p>If your board has rev. 0001 of the 8U2 firmware on it, there's no need to upgrade it.
</p>
<p class='vspace'></p><h3>Download a DFU Programmer</h3>
<p>This is the software that will update the code on the 8u2
</p>
<p class='vspace'></p><p><strong>Windows</strong>: Download Atmel's flip programmer from here <a class='urllink' href='http://www.atmel.com/dyn/products/tools_card.asp?tool_id=3886' rel='nofollow'>http://www.atmel.com/dyn/products/tools_card.asp?tool_id=3886</a>
</p>
<p class='vspace'></p><p><strong>Mac</strong>: Install <span class='wikiword'>MacPorts</span> following these instructions: <a class='urllink' href='http://www.macports.org/install.php#pkg' rel='nofollow'>http://www.macports.org/install.php#pkg</a> 
Once <span class='wikiword'>MacPorts</span> is installed, in a Terminal window, type 
<code>sudo port install dfu-programmer</code>
</p>
<p class='vspace'></p><p><em>NB: If you've never used sudo before, it will ask for your password.  Use the password you login to your Mac with.  sudo allows you to run commands as the administrator of the computer</em>
</p>
<p class='vspace'></p><p><strong>Linux</strong>: from a command line type 
</p>
<p class='vspace'></p><p><code>sudo apt-get install dfu-programme</code> 
</p>
<p class='vspace'></p><p>or 
</p>
<p class='vspace'></p><p><code>sudo aptitude install dfu-programmer</code>
</p>
<p class='vspace'></p><p>depending on your distribution
</p>
<p class='vspace'></p><h3>Download updated firmware for the 8U2</h3>
<p>The latest version is here <a class='urllink' href='https://github.com/arduino/Arduino/tree/master/hardware/arduino/firmwares' rel='nofollow'>https://github.com/arduino/Arduino/tree/master/hardware/arduino/firmwares</a> Choose the version that is suitable for your board, either arduino-usbserial/Arduino-usbserial-uno.hex or arduino-usbserial/Arduino-usbserial-mega.hex
</p>
<p class='vspace'></p><p>The firmware is also located with the Arduino software in the /hardware/arduino/firmwares/arduino-usbserial folder. On OSX, right-click or command-click on the Arduino application and select "show package contents" to find this folder.
</p>
<p class='vspace'></p><h3>If your board is NOT an Arduino UNO SMD </h3>
<p>You'll need to solder a 10k resistor (Brown-black-orange) at the back of your board in the same location as this picture. 
</p>
<p class='vspace'></p><div><a class='urllink' href='../uploads/Hacking/Uno-back-DFU-resistor.png' rel='nofollow'><img width='450' src='../uploads/Hacking/Uno-back-DFU-resistor.png' alt='' title='' /></a></div>
<p class='vspace'></p><h3>Connect the Arduino to your computer with a usb cable</h3>
<p>Just like you do whenever you're programming it.
</p>
<p class='vspace'></p><h3>Reset the 8u2 </h3>
<p>To do this, briefly bridge the reset pin with the ground. The pins are located near the USB connector, as shown in this picture.  Connect them briefly with a piece of wire.
</p>
<p class='vspace'></p><div><a class='urllink' href='../uploads/Hacking/Uno-front-DFU-reset.png' rel='nofollow'><img width='450' src='../uploads/Hacking/Uno-front-DFU-reset.png' alt='' title='' /></a></div>
<p class='vspace'></p><p>To verify you have reset the 8u2 chip: In the Arduino programming environment, check the list of serial ports.  The serial port for your board should no longer show up.
</p>
<p class='vspace'></p><h3>Program the chip</h3>
<p><strong>Windows</strong>: use flip to upload the hex file to your board
</p>
<p class='vspace'></p><p><strong>Mac &amp; Linux</strong>: from a terminal window, change directories to get into the folder with the firmware. If you saved the firmware in your downloads folder on OSX, then you might type
</p>
<p class='vspace'></p><p><code>cd Downloads/</code>
</p>
<p class='vspace'></p><p>Once there, type:
</p>
<p class='vspace'></p><p><code>sudo dfu-programmer at90usb82 erase</code>
</p>
<p class='vspace'></p><p>When this command is done and you get a command prompt again, type
</p>
<p class='vspace'></p><p><code>sudo dfu-programmer at90usb82 flash Arduino-usbserial-uno.hex</code>
</p>
<p class='vspace'></p><p>Finally, type
</p>
<p class='vspace'></p><p><code>sudo dfu-programmer at90usb82 reset</code>
</p>
<p class='vspace'></p><h3>Unplug your board and plug it back in</h3>
<p>Your board should be ready and up to date. You can check this by looking in the serial port menu of the Arduino software.  Your port should re-appear.
</p>
<p class='vspace'></p><h3>Using other firmware</h3>
<p>The 8U2's flexibility allows for other firmware so your board can appear as a different USB device (MIDI controller, HID, etc.). See the tutorials below for additional information.
</p>
<p class='vspace'></p><p><a class='wikilink' href='MidiWith8U2Firmware.html'>MIDI Note Player using the MIDI firmware</a>
</p>
</div>


<!-- AddThis Button BEGIN -->
<script type="text/javascript">var addthis_language = "en";
</script>
<div class="addthis_container addthis_toolbox addthis_default_style" addthis:url="http://arduino.cc/en/Hacking/DFUProgramming8U2" addthis:title="Arduino Wiki English">
<a href="http://www.addthis.com/bookmark.php?v=250&amp;username=arduinoteam" class="addthis_button_compact">Share</a><span 
class="addthis_separator">|</span><a class="addthis_button_email"></a><a class="addthis_button_favorites"></a><a class="addthis_button_print"></a><a 
class="addthis_button_facebook"></a><a class="addthis_button_twitter"></a><script type="text/javascript" 
src="../../../s7.addthis.com/js/250/addthis_widget.js#username=arduinoteam"></script></div>
<!-- AddThis Button END -->

</div>
<!--PageFooterFmt-->
<div id="pagefooter">
&copy;Arduino | 
  <a href='DFUProgramming8U2264b.html?action=edit'>Edit Page</a> | <a href='DFUProgramming8U2ad68.html?action=diff'>Page History</a> | <a href='DFUProgramming8U260ee.html?action=print' target='_blank'>Printable View</a> | <a href='../Site/AllRecentChanges.html'>All Recent Site Changes</a>
</div>
<!--/PageFooterFmt-->
</div>

<!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? 
"https://stats.arduino.cc/piwik/" : "http://stats.arduino.cc/piwik/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img 
src="http://stats.arduino.cc/piwik/piwik.php?idsite=1" style="border:0" 
alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->

</body>
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
</html>
